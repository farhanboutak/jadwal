<!DOCTYPE html>
<html lang="id" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generator Jadwal Pelajaran ‚Äì Layout Lebih Besar</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
:root {
  --bg: #f0f4ff;
  --surface: #ffffff;
  --surface2: #f7f9ff;
  --border: #d1d9f0;
  --text: #1a2340;
  --text2: #5a6a8a;
  --accent: #2563eb;
  --accent2: #1d4ed8;
  --accent-light: #dbeafe;
  --shadow: 0 4px 24px rgba(37,99,235,0.10);
  --radius: 16px;
  --radius-sm: 8px;
}
[data-theme="dark"] {
  --bg: #0f172a; --surface: #1e293b; --surface2: #162032;
  --border: #334155; --text: #e2e8f0; --text2: #94a3b8;
  --accent: #3b82f6; --accent2: #2563eb; --accent-light: #1e3a5f;
  --shadow: 0 4px 24px rgba(0,0,0,0.4);
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; transition: background 0.3s, color 0.3s; }

/* Header */
header {
  background: var(--surface); border-bottom: 1px solid var(--border);
  padding: 14px 24px; display: flex; align-items: center; justify-content: space-between;
  position: sticky; top: 0; z-index: 100; box-shadow: var(--shadow);
}
.logo { display: flex; align-items: center; gap: 12px; }
.logo-icon { width: 38px; height: 38px; background: var(--accent); border-radius: 10px; display: grid; place-items: center; font-size: 18px; }
.logo h1 { font-size: 1rem; font-weight: 800; color: var(--text); line-height: 1.2; }
.logo span { font-size: 0.7rem; color: var(--text2); font-weight: 500; display: block; }
.header-actions { display: flex; gap: 8px; }

/* Buttons */
.btn { padding: 9px 18px; border-radius: var(--radius-sm); border: none; cursor: pointer; font-family: inherit; font-size: 0.85rem; font-weight: 600; transition: all 0.2s; display: inline-flex; align-items: center; gap: 6px; }
.btn-icon { padding: 9px 11px; border-radius: var(--radius-sm); border: 1px solid var(--border); background: var(--surface2); cursor: pointer; font-size: 1rem; transition: all 0.2s; line-height: 1; }
.btn-icon:hover { background: var(--accent-light); border-color: var(--accent); }
.btn-primary { background: var(--accent); color: white; }
.btn-primary:hover { background: var(--accent2); transform: translateY(-1px); box-shadow: 0 4px 12px rgba(37,99,235,0.3); }
.btn-outline { background: transparent; color: var(--accent); border: 1.5px solid var(--accent); }
.btn-outline:hover { background: var(--accent-light); }
.btn-ghost { background: var(--surface2); color: var(--text2); border: 1px solid var(--border); }
.btn-ghost:hover { background: var(--border); color: var(--text); }
.btn-success { background: #059669; color: white; }
.btn-success:hover { opacity: 0.88; }
.btn-warning { background: #d97706; color: white; }
.btn-warning:hover { opacity: 0.88; }
.btn-danger { background: #dc2626; color: white; }
.btn-danger:hover { opacity: 0.88; }

/* Main */
main { max-width: 1200px; margin: 0 auto; padding: 28px 20px; } /* Lebar maksimal diperbesar */

/* Card */
.card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; margin-bottom: 24px; }
.card-header { padding: 18px 24px 14px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 12px; }
.card-header-icon { font-size: 1.3rem; }
.card-header h2 { font-size: 0.95rem; font-weight: 700; }
.card-header p { font-size: 0.75rem; color: var(--text2); margin-top: 2px; }
.card-body { padding: 22px 24px; }

/* Form */
.form-row { display: grid; gap: 16px; margin-bottom: 18px; }
.form-row-2 { grid-template-columns: 1fr 1fr; }
.form-group { display: flex; flex-direction: column; gap: 6px; }
.form-label { font-size: 0.82rem; font-weight: 600; color: var(--text); }
.form-label .badge { display: inline-block; background: var(--accent-light); color: var(--accent); font-size: 0.67rem; padding: 2px 7px; border-radius: 100px; margin-left: 6px; font-weight: 700; }
input[type="text"], input[type="number"], select, textarea {
  padding: 10px 14px; background: var(--surface2); border: 1.5px solid var(--border);
  border-radius: var(--radius-sm); font-family: inherit; font-size: 0.85rem; color: var(--text);
  transition: border-color 0.2s, box-shadow 0.2s; width: 100%;
}
textarea { font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; resize: vertical; min-height: 150px; line-height: 1.7; }
input:focus, select:focus, textarea:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(37,99,235,0.12); }
textarea::placeholder, input::placeholder { color: var(--text2); opacity: 0.6; }

.counter-row { display: flex; gap: 10px; margin-bottom: 18px; flex-wrap: wrap; }
.counter-chip { background: var(--surface2); border: 1px solid var(--border); border-radius: 100px; padding: 5px 14px; font-size: 0.75rem; font-weight: 600; color: var(--text2); display: flex; align-items: center; gap: 5px; }
.counter-chip.ok { background: #d1fae5; color: #065f46; border-color: #a7f3d0; }
.counter-chip.warn { background: #fef3c7; color: #92400e; border-color: #fde68a; }
[data-theme="dark"] .counter-chip.ok { background: #064e3b; color: #6ee7b7; border-color: #065f46; }
[data-theme="dark"] .counter-chip.warn { background: #451a03; color: #fbbf24; border-color: #78350f; }

.form-actions { display: flex; gap: 10px; flex-wrap: wrap; }
.form-hint { font-size: 0.73rem; color: var(--text2); margin-top: 6px; }

/* Jam config */
.jam-config { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; }
.jam-item { display: flex; flex-direction: column; gap: 4px; }
.jam-item label { font-size: 0.72rem; font-weight: 600; color: var(--text2); }
.jam-item input { padding: 7px 10px; font-size: 0.78rem; }

/* Checkbox clear jam */
.clear-jam-wrapper { display: flex; align-items: center; gap: 8px; margin-bottom: 16px; }
.clear-jam-wrapper input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; }
.clear-jam-wrapper label { font-size: 0.85rem; font-weight: 500; color: var(--text); cursor: pointer; }

/* Output Section */
#output-section { display: none; }
.output-toolbar { display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 12px; margin-bottom: 20px; }
.output-title h2 { font-size: 1.1rem; font-weight: 800; }
.output-title p { font-size: 0.75rem; color: var(--text2); margin-top: 3px; }
.export-btns { display: flex; gap: 8px; flex-wrap: wrap; }

/* Filter bar with extra controls */
.filter-bar {
  display: flex;
  gap: 12px;
  margin-bottom: 16px;
  flex-wrap: wrap;
  align-items: center;
  background: var(--surface2);
  padding: 12px 16px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
}
.search-wrap { flex: 2; min-width: 200px; position: relative; }
.search-wrap input { padding-left: 36px; width: 100%; }
.search-icon { position: absolute; left: 11px; top: 50%; transform: translateY(-50%); font-size: 0.85rem; color: var(--text2); pointer-events: none; }
.filter-select { min-width: 130px; cursor: pointer; }
.range-wrap { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.range-wrap label { font-size: 0.8rem; font-weight: 600; color: var(--text2); }
.range-wrap input[type=range] { width: 120px; }
#font-size-value { min-width: 45px; text-align: center; font-weight: 600; }

/* Checkbox time row */
.time-toggle-wrap { display: flex; align-items: center; gap: 6px; }
.time-toggle-wrap input { width: 16px; height: 16px; cursor: pointer; }
.time-toggle-wrap label { font-size: 0.8rem; font-weight: 500; cursor: pointer; }

/* ‚ïê‚ïê‚ïê THE SCHEDULE GRID TABLE (diperbesar) ‚ïê‚ïê‚ïê */
#jadwal-print-area {
  background: white;
  padding: 24px 28px 20px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  color: #111;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
[data-theme="dark"] #jadwal-print-area { background: #1e293b; color: #e2e8f0; border-color: #334155; }

.jadwal-title-block { text-align: center; margin-bottom: 20px; }
.jadwal-main-title { font-size: 1rem; font-weight: 600; color: #333; margin-bottom: 4px; letter-spacing: 0.3px; }
.jadwal-kelas-name { font-size: 2rem; font-weight: 800; color: #111; letter-spacing: 0.01em; }
[data-theme="dark"] .jadwal-main-title { color: #94a3b8; }
[data-theme="dark"] .jadwal-kelas-name { color: #e2e8f0; }

.sched-grid-wrap { overflow-x: auto; }
.sched-grid {
  width: 100%; border-collapse: collapse;
  font-size: 1rem; /* lebih besar dari sebelumnya */
  min-width: 800px;
  border: 2px solid #222;
}
[data-theme="dark"] .sched-grid { border-color: #475569; }
.sched-grid th, .sched-grid td {
  border: 1px solid #888;
  text-align: center;
  vertical-align: middle;
  padding: 12px 8px; /* padding lebih besar */
}
[data-theme="dark"] .sched-grid th, [data-theme="dark"] .sched-grid td { border-color: #475569; }

/* Header row (jam numbers) */
.sched-grid thead th {
  background: #eaeef5;
  font-weight: 700;
  font-size: 1rem;
  padding: 12px 6px;
  color: #1e293b;
  border: 1px solid #888;
}
[data-theme="dark"] .sched-grid thead th { background: #0f172a; color: #e2e8f0; border-color: #475569; }

/* Day column */
.col-hari {
  width: 90px; min-width: 90px;
  font-weight: 800;
  font-size: 1.1rem;
  background: #f1f5f9;
  padding: 14px 8px;
  color: #0b1e33;
  border-right: 2px solid #555 !important;
}
[data-theme="dark"] .col-hari { background: #1e293b; color: #e2e8f0; border-right-color: #64748b !important; }

/* Subject cell */
.cell-mapel {
  padding: 12px 10px;
  line-height: 1.4;
  font-size: 0.95rem;
}
.cell-mapel .mapel { font-weight: 700; font-size: 1rem; color: #111; display: block; margin-bottom: 4px; }
.cell-mapel .guru { font-size: 0.8rem; color: #444; display: block; font-style: italic; }
[data-theme="dark"] .cell-mapel .mapel { color: #e2e8f0; }
[data-theme="dark"] .cell-mapel .guru { color: #9aa9c1; }

/* Special cells */
.cell-empty { background: #fafafa; }
.cell-gls { background: #fff9c6; }
.cell-upcr { background: #d9f0d9; }
.cell-bk { background: #fad1e6; }
.cell-krida { background: #c9e2f9; }
[data-theme="dark"] .cell-gls { background: #3a351a; }
[data-theme="dark"] .cell-upcr { background: #1a3a1a; }
[data-theme="dark"] .cell-bk { background: #3a1a2a; }
[data-theme="dark"] .cell-krida { background: #1a2a3a; }

/* Time row (lebih besar juga) */
.time-row td {
  font-size: 0.8rem; color: #666; background: #f9f9f9;
  padding: 6px 4px; border-top: none;
  font-family: 'JetBrains Mono', monospace;
}
[data-theme="dark"] .time-row td { background: #1e293b; color: #94a3b8; }

/* Footer */
.jadwal-footer {
  display: flex; justify-content: space-between; align-items: center;
  margin-top: 16px; font-size: 0.75rem; color: #888;
  padding: 0 4px;
}

/* Dynamic font size classes (akan diatur via JS) */
.sched-grid.font-small { font-size: 0.8rem; }
.sched-grid.font-small .col-hari { font-size: 0.9rem; }
.sched-grid.font-small .cell-mapel .mapel { font-size: 0.85rem; }
.sched-grid.font-small .cell-mapel .guru { font-size: 0.7rem; }

.sched-grid.font-medium { font-size: 1rem; } /* default */
.sched-grid.font-medium .col-hari { font-size: 1.1rem; }
.sched-grid.font-medium .cell-mapel .mapel { font-size: 1rem; }
.sched-grid.font-medium .cell-mapel .guru { font-size: 0.8rem; }

.sched-grid.font-large { font-size: 1.2rem; }
.sched-grid.font-large .col-hari { font-size: 1.3rem; }
.sched-grid.font-large .cell-mapel .mapel { font-size: 1.2rem; }
.sched-grid.font-large .cell-mapel .guru { font-size: 0.95rem; }

/* Toast */
#toast {
  position: fixed; bottom: 24px; right: 24px;
  background: var(--text); color: var(--bg);
  padding: 11px 18px; border-radius: var(--radius-sm);
  font-size: 0.83rem; font-weight: 600;
  z-index: 9999; transform: translateY(80px); opacity: 0;
  transition: all 0.3s; pointer-events: none; max-width: 260px;
}
#toast.show { transform: translateY(0); opacity: 1; }

/* Print */
@media print {
  body * { visibility: hidden; }
  #jadwal-print-area, #jadwal-print-area * { visibility: visible; }
  #jadwal-print-area { position: fixed; left: 0; top: 0; width: 100%; padding: 12px; }
  .sched-grid { font-size: 0.9rem; min-width: unset; }
}

/* Responsive */
@media (max-width: 800px) {
  .filter-bar { flex-direction: column; align-items: stretch; }
  .range-wrap, .time-toggle-wrap { justify-content: flex-start; }
}
</style>
</head>
<body>

<header>
  <div class="logo">
    <div class="logo-icon">üìÖ</div>
    <div>
      <h1>Jadwal Pelajaran</h1>
      <span>Made with love‚ù§Ô∏è</span>
    </div>
  </div>
  <div class="header-actions">
    <button class="btn-icon" id="theme-toggle" title="Dark mode">üåô</button>
    <button class="btn-icon" onclick="window.print()" title="Cetak">üñ®Ô∏è</button>
  </div>
</header>

<main>
  <!-- Step 1: Info Kelas -->
  <div class="card" id="step1-card">
    <div class="card-header">
      <span class="card-header-icon">üè´</span>
      <div><h2>Informasi Jadwal</h2><p>Isi identitas sekolah dan kelas (kosongkan jika tidak ingin ditampilkan)</p></div>
    </div>
    <div class="card-body">
      <div class="form-row form-row-2">
        <div class="form-group">
          <label class="form-label">Nama Sekolah</label>
          <input type="text" id="nama-sekolah" placeholder="SMKN 2 Wonosari" value="SMKN 2 Wonosari">
        </div>
        <div class="form-group">
          <label class="form-label">Nama Kelas</label>
          <input type="text" id="nama-kelas" placeholder="Contoh: XI TJKT 3, XI TKL">
        </div>
      </div>
      <div class="form-row form-row-2">
        <div class="form-group">
          <label class="form-label">Semester</label>
          <input type="text" id="semester" placeholder="Contoh: Semester 1 " value="Semester 2">
        </div>
        <div class="form-group">
          <label class="form-label">Tanggal Mulai</label>
          <input type="text" id="tgl-mulai" placeholder="Kosongkan kalau tidak ingin ditampilkan">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Jumlah Jam per Hari <span class="badge">Senin‚ÄìKamis</span></label>
          <input type="number" id="jam-per-hari" value="10" min="6" max="12" style="max-width:120px;">
          <p class="form-hint">Jumat otomatis menggunakan sisa kode setelah Senin‚ÄìKamis.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Step 2: Jam & Waktu (opsional) -->
  <div class="card" id="step2-card">
    <div class="card-header">
      <span class="card-header-icon">‚è∞</span>
      <div><h2>Waktu Jam Pelajaran</h2><p>Opsional ‚Äî isi waktu tiap jam untuk ditampilkan di jadwal</p></div>
    </div>
    <div class="card-body">
      <!-- Checkbox untuk mengosongkan semua jam (default dicentang) -->
      <div class="clear-jam-wrapper">
        <input type="checkbox" id="clear-jam-checkbox" checked>
        <label for="clear-jam-checkbox">Kosongkan semua jam (sembunyikan waktu)</label>
      </div>
      <div class="jam-config" id="jam-config-wrap"></div>
      <p class="form-hint" style="margin-top:12px;">üí° Kosongkan jika tidak ingin menampilkan waktu (seperti foto).</p>
    </div>
  </div>

  <!-- Step 3: Input Kode -->
  <div class="card" id="step3-card">
    <div class="card-header">
      <span class="card-header-icon">üìù</span>
      <div><h2>Input Kode Guru</h2><p>Masukkan kode guru sesuai urutan jam pelajaran</p></div>
    </div>
    <div class="card-body">
      <div class="form-group" style="margin-bottom:16px;">
        <label class="form-label">Kode Guru <span class="badge">Minimal 41 kode</span></label>
        <textarea id="kodes" placeholder="Pisah spasi/koma. Contoh:&#10;Upcr D4 D4 T3 T3 Mat G1 J1 J1 H1&#10;GLS GLS BI BI BK Seni Seni IF IF IF&#10;..."></textarea>
        <p class="form-hint">Senin‚ÄìKamis: <strong id="hint-jam">10</strong> kode/hari ¬∑ Jumat: sisanya</p>
      </div>
      <div class="counter-row" id="counter-row" style="display:none">
        <div class="counter-chip" id="chip-total">üìä 0 kode</div>
        <div class="counter-chip" id="chip-seninkamis">Senin‚ÄìKamis: 0/40</div>
        <div class="counter-chip" id="chip-jumat">Jumat: 0</div>
        <div class="counter-chip" id="chip-status">‚è≥</div>
      </div>
      <div class="form-actions">
        <button class="btn btn-primary" onclick="generateJadwal()">‚ú® Buat Jadwal</button>
        <button class="btn btn-ghost" onclick="clearForm()">üóëÔ∏è Reset</button>
        <button class="btn btn-outline" onclick="loadContoh()">üìã Contoh Data</button>
      </div>
    </div>
  </div>

  <!-- Output -->
  <div id="output-section">
    <div class="output-toolbar">
      <div class="output-title">
        <h2 id="out-kelas-title"></h2>
        <p id="out-subtitle"></p>
      </div>
      <div class="export-btns">
        <button class="btn btn-ghost" onclick="showInputSection()">‚úèÔ∏è Edit</button>
        <button class="btn btn-ghost" onclick="simpanJadwal()">üíæ Simpan</button>
        <button class="btn btn-ghost" onclick="muatJadwal()">üìÇ Muat</button>
        <button class="btn btn-success" onclick="downloadCSV()">üìä CSV</button>
        <button class="btn btn-warning" onclick="downloadJPG()">üñºÔ∏è JPG</button>
        <button class="btn btn-danger" onclick="downloadPDF()">üìÑ PDF</button>
      </div>
    </div>

    <!-- Filter bar dengan fitur baru -->
    <div class="filter-bar">
      <div class="search-wrap">
        <span class="search-icon">üîç</span>
        <input type="text" id="search-input" placeholder="Cari mapel, guru, kode..." oninput="renderGrid()">
      </div>
      <select class="filter-select" id="filter-hari" onchange="renderGrid()">
        <option value="">Semua Hari</option>
        <option>Senin</option><option>Selasa</option><option>Rabu</option>
        <option>Kamis</option><option>Jumat</option>
      </select>

      <!-- Pengatur ukuran font -->
      <div class="range-wrap">
        <label for="font-size-slider">üî§ Ukuran:</label>
        <input type="range" id="font-size-slider" min="0.8" max="1.5" step="0.1" value="1.0">
        <span id="font-size-value">1.0rem</span>
      </div>

      <!-- Toggle baris waktu -->
      <div class="time-toggle-wrap">
        <input type="checkbox" id="show-time-row" onchange="renderGrid()">
        <label for="show-time-row">‚è≤Ô∏è Tampilkan jam</label>
      </div>
    </div>

    <!-- The printable grid area -->
    <div id="jadwal-print-area">
      <div class="jadwal-title-block">
        <div class="jadwal-main-title" id="print-main-title"></div>
        <div class="jadwal-kelas-name" id="print-kelas-name"></div>
      </div>
      <div class="sched-grid-wrap">
        <table class="sched-grid" id="sched-grid-table"></table>
      </div>
      <div class="jadwal-footer">
        <span id="footer-left"></span>
        <span id="footer-right">Generated by Jadwal Sekolah App</span>
      </div>
    </div>
  </div>
</main>

<div id="toast"></div>

<script>
// ==================  PERBAIKAN AGAR TAMPILAN SEPERTI FOTO ==================
// 1. Menambahkan kode-kode guru sesuai nama yang muncul di foto
// 2. Checkbox "Kosongkan semua jam" dicentang default, sehingga baris waktu tidak tampil
// 3. Contoh data (loadContoh) diisi menyerupai jadwal di foto image.png
// 4. Penambahan slider ukuran font & toggle baris waktu

const kodeGuru = {
  // Kode asli (tetap dipertahankan)
  "A1": { nama: "Dra. Siti Rahayu", mapel: "PA. Islam" },
  "A2": { nama: "Dwi Sidik Purnomo", mapel: "PA. Islam" },
  "A3": { nama: "Akhmad Affandi", mapel: "PA. Islam" },
  "A4": { nama: "Drs. Adnan", mapel: "PA. Islam" },
  "A5": { nama: "Retno Wiranti", mapel: "PA. Islam" },
  "A7": { nama: "Wahyudi", mapel: "PA. Islam" },
  "A8": { nama: "Mozes Gilang P.", mapel: "PA. Kristen" },
  "A9": { nama: "Sardi", mapel: "PA. Hindu" },
  "A10": { nama: "Veronika Elisa", mapel: "PA. Katholik" },
  "R1": { nama: "Wahyuni, S.Pd.", mapel: "Pend. Pancasila" },
  "R2": { nama: "Harini Widyastuti", mapel: "Pend. Pancasila" },
  "R3": { nama: "Warsito, S.Pd.", mapel: "Pend. Pancasila" },
  "R4": { nama: "Anida Nihayati", mapel: "Pend. Pancasila" },
  "D1": { nama: "Kurniadi Wilapa", mapel: "Bahasa Indonesia" },
  "D2": { nama: "Widya Ajeng Pemila", mapel: "Bahasa Indonesia" },
  "D3": { nama: "Heri Santoso", mapel: "Bahasa Indonesia" },
  "D4": { nama: "Agus Slamet Zuari", mapel: "Bahasa Indonesia" },
  "D5": { nama: "Febrianita S.A.", mapel: "Bahasa Indonesia" },
  "D6": { nama: "Siti Rohayati", mapel: "Bahasa Indonesia" },
  "J1": { nama: "Aminuddin Aziz", mapel: "Penjasorkes" },
  "J2": { nama: "Eko Winanto", mapel: "Penjasorkes" },
  "S1": { nama: "Dwi Mulyati", mapel: "Sejarah" },
  "S2": { nama: "Ninik Sudaryanti", mapel: "Sejarah" },
  "Y1": { nama: "Arif Hakim D.", mapel: "Seni Budaya" },
  "Y2": { nama: "Sidiq Jefry H.", mapel: "Seni Budaya" },
  "T1": { nama: "Bekti Yahrini", mapel: "Matematika" },
  "T2": { nama: "Sukandar, S.Pd.", mapel: "Matematika" },
  "T3": { nama: "Guru Matematika", mapel: "Matematika" },
  "T4": { nama: "Wikantiasno", mapel: "Matematika" },
  "T5": { nama: "Ika Wulandari", mapel: "Matematika" },
  "T6": { nama: "Drs. Paryoko", mapel: "Matematika" },
  "T7": { nama: "Krisdwindartatik", mapel: "Matematika" },
  "G1": { nama: "Yeni Widiyaswati", mapel: "Bahasa Inggris" },
  "G2": { nama: "Arief Imanudin", mapel: "Bahasa Inggris" },
  "G3": { nama: "Feryanto Estu N.", mapel: "Bahasa Inggris" },
  "G4": { nama: "Nastiani Murti", mapel: "Bahasa Inggris" },
  "G5": { nama: "Sutini, S.Pd.", mapel: "Bahasa Inggris" },
  "G6": { nama: "Reni, S.Pd.", mapel: "Bahasa Inggris" },
  "G7": { nama: "Murni Dwi Astuti", mapel: "Bahasa Inggris" },
  "F1": { nama: "Agus Riyanto", mapel: "Projek IPAS" },
  "C1": { nama: "Sri Winartini", mapel: "Projek IPAS" },
  "C2": { nama: "Rahma Nursitha", mapel: "Projek IPAS" },
  "C3": { nama: "Nurbiandari", mapel: "Projek IPAS" },
  "H1": { nama: "Sri Winarti", mapel: "Kewirausahaan" },
  "H2": { nama: "Jazuri, S.Pd.", mapel: "Kewirausahaan" },
  "H3": { nama: "Desti Indriyani", mapel: "Kewirausahaan" },
  "BK1": { nama: "Sri Sukartini", mapel: "Bimb. Konseling" },
  "BK3": { nama: "Indra Krisna", mapel: "Bimb. Konseling" },
  "BK4": { nama: "Hardiyanto", mapel: "Bimb. Konseling" },
  "BK5": { nama: "Ngatijan, S.Pd.", mapel: "Bimb. Konseling" },
  "BK6": { nama: "Suci Rahmawati", mapel: "Bimb. Konseling" },
  "BK7": { nama: "Vivi Astriati", mapel: "Bimb. Konseling" },
  "BK8": { nama: "Ahmad Ali M.", mapel: "Bimb. Konseling" },
  "IF1": { nama: "Ninik Sulistyowati", mapel: "Informatika" },
  "W1": { nama: "Heryani Retno H.", mapel: "Bahasa Jawa" },
  "W2": { nama: "Aji Saputra", mapel: "Bahasa Jawa" },
  // Special non-guru codes
  "GLS": { nama: "", mapel: "GLS" },
  "UPCR": { nama: "", mapel: "Upacara" },
  "Upcr": { nama: "", mapel: "Upacara" },
  "KRIDA": { nama: "", mapel: "Krida" },
  "Krida": { nama: "", mapel: "Krida" },
  "BK": { nama: "", mapel: "BK" },
  "-": { nama: "", mapel: "" },

  // KODE TEST (bisa dihapus nanti, hanya untuk contoh data agar mirip foto)
  "DTK": { nama: "TEST", mapel: "Bahasa Indonesia" },
  "END": { nama: "Bayu", mapel: "Matematika" },
  "YTS": { nama: "Baba", mapel: "IPS" },
  "SGS": { nama: "Si", mapel: "Informatika" },
  "SRW": { nama: "Sui", mapel: "Penjas" },
  "IDS": { nama: "Idi", mapel: "IPA" },
  "ID2": { nama: "Idi", mapel: "IPA" },
  "NRM": { nama: "Nur", mapel: "BK" },
  "DRS": { nama: "Dar", mapel: "Seni Budaya" },
  "KHD": { nama: "Khi", mapel: "Krida" },
  "SSC": { nama: "Sisca", mapel: "Matematika" },
  "KBN": { nama: "Khi", mapel: "Krida" }
};

const HARI = ['Senin','Selasa','Rabu','Kamis','Jumat'];
let scheduleData = [];
let defaultJamTimes = []; // Menyimpan nilai default jam

// Variabel global untuk kontrol tampilan
let _showTimeRow = false; // default tidak tampil

// ‚îÄ‚îÄ Dark mode ‚îÄ‚îÄ
document.getElementById('theme-toggle').onclick = () => {
  const html = document.documentElement;
  const isDark = html.getAttribute('data-theme') === 'dark';
  html.setAttribute('data-theme', isDark ? 'light' : 'dark');
  document.getElementById('theme-toggle').textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
};

// ‚îÄ‚îÄ Jam config builder ‚îÄ‚îÄ
function buildJamConfig() {
  const n = parseInt(document.getElementById('jam-per-hari').value) || 10;
  document.getElementById('hint-jam').textContent = n;
  const wrap = document.getElementById('jam-config-wrap');
  wrap.innerHTML = '';
  const defaults = [
    '07.30‚Äì07.55','07.55‚Äì08.20','08.20‚Äì08.45','08.45‚Äì09.10',
    '09.10‚Äì09.35','09.55‚Äì10.20','10.20‚Äì10.45','10.45‚Äì11.10',
    '11.10‚Äì11.35','11.35‚Äì12.00','14.30‚Äì15.15','15.15‚Äì16.00'
  ];
  defaultJamTimes = [];
  for (let i = 0; i < n; i++) {
    const defaultVal = defaults[i] || '';
    defaultJamTimes.push(defaultVal);
    wrap.innerHTML += `<div class="jam-item">
      <label>Jam ke-${i+1}</label>
      <input type="text" class="jam-time" id="jt-${i+1}" placeholder="${defaultVal}" value="${defaultVal}">
    </div>`;
  }
  // Set checkbox state: jika checkbox dicentang, kosongkan semua
  const chk = document.getElementById('clear-jam-checkbox');
  if (chk && chk.checked) {
    clearAllJamFields(true);
  }
}
buildJamConfig();

// Fungsi untuk mengosongkan/mengisi jam berdasarkan checkbox
function clearAllJamFields(forceClear) {
  const n = parseInt(document.getElementById('jam-per-hari').value) || 10;
  for (let i = 1; i <= n; i++) {
    const el = document.getElementById(`jt-${i}`);
    if (el) {
      if (forceClear) {
        el.value = '';
      } else {
        el.value = defaultJamTimes[i-1] || '';
      }
    }
  }
}

// Event listener untuk checkbox
document.getElementById('clear-jam-checkbox').addEventListener('change', function(e) {
  clearAllJamFields(e.target.checked);
});

// Saat jumlah jam berubah, rebuild dan sesuaikan checkbox
document.getElementById('jam-per-hari').addEventListener('input', function() {
  buildJamConfig();
});

// ‚îÄ‚îÄ Counter ‚îÄ‚îÄ
document.getElementById('kodes').addEventListener('input', function() {
  const kodes = this.value.trim().split(/[\s,]+/).filter(Boolean);
  const n = kodes.length;
  const jamPerHari = parseInt(document.getElementById('jam-per-hari').value)||10;
  const need = jamPerHari * 4;
  const row = document.getElementById('counter-row');
  row.style.display = 'flex';
  document.getElementById('chip-total').textContent = `üìä ${n} kode`;
  document.getElementById('chip-seninkamis').textContent = `Sen‚ÄìKam: ${Math.min(n, need)}/${need}`;
  const jumat = Math.max(0, n - need);
  document.getElementById('chip-jumat').textContent = `Jumat: ${jumat}`;
  const s = document.getElementById('chip-status');
  if (n >= need + 1) { s.textContent = '‚úÖ Cukup'; s.className = 'counter-chip ok'; }
  else { s.textContent = `‚ö†Ô∏è Kurang ${(need+1)-n}`; s.className = 'counter-chip warn'; }
});

// ‚îÄ‚îÄ Generate ‚îÄ‚îÄ
function generateJadwal() {
  const input = document.getElementById('kodes').value.trim();
  const kodes = input.split(/[\s,]+/).filter(Boolean);
  const jamPerHari = parseInt(document.getElementById('jam-per-hari').value)||10;
  const need = jamPerHari * 4;

  if (kodes.length < need + 1) {
    showToast(`‚ö†Ô∏è Minimal ${need+1} kode (${jamPerHari}/hari √ó 4 hari + Jumat)!`);
    return;
  }

  // Collect jam times
  const jamTimes = [];
  for (let i = 1; i <= jamPerHari; i++) {
    const el = document.getElementById(`jt-${i}`);
    jamTimes.push(el ? el.value.trim() : '');
  }

  scheduleData = [];
  let idx = 0;
  for (let h = 0; h < 4; h++) {
    scheduleData.push({ hari: HARI[h], kodes: kodes.slice(idx, idx + jamPerHari) });
    idx += jamPerHari;
  }
  scheduleData.push({ hari: 'Jumat', kodes: kodes.slice(idx) });

  window._jamTimes = jamTimes;
  window._jamPerHari = jamPerHari;

  renderGrid();
  updatePrintHeader();

  document.getElementById('output-section').style.display = 'block';
  document.getElementById('output-section').scrollIntoView({ behavior: 'smooth' });
  showToast('‚úÖ Jadwal berhasil dibuat!');
}

function updatePrintHeader() {
  const kelas = document.getElementById('nama-kelas').value || 'Kelas';
  const sekolah = document.getElementById('nama-sekolah').value || '';
  const semester = document.getElementById('semester').value || '';
  const tgl = document.getElementById('tgl-mulai').value || '';
  const combinedTitle = [sekolah, semester, tgl].filter(Boolean).join(' ¬∑ ');
  document.getElementById('print-main-title').textContent = `Jadwal KBM ${combinedTitle}`;
  document.getElementById('print-kelas-name').textContent = kelas;
  document.getElementById('out-kelas-title').textContent = `Jadwal Kelas ${kelas}`;
  document.getElementById('out-subtitle').textContent = combinedTitle;
  const now = new Date();
  document.getElementById('footer-left').textContent = `Timetable generated: ${now.toLocaleDateString('id-ID')}`;
  document.getElementById('footer-right').textContent = kelas;
}

function renderGrid() {
  const jamPerHari = window._jamPerHari || 10;
  const jamTimes = window._jamTimes || [];
  const q = (document.getElementById('search-input')?.value||'').toLowerCase();
  const hariFilter = document.getElementById('filter-hari')?.value||'';
  const displayHari = hariFilter ? scheduleData.filter(d=>d.hari===hariFilter) : scheduleData;

  // Ambil status toggle baris waktu
  _showTimeRow = document.getElementById('show-time-row').checked;

  // Ambil nilai slider ukuran font
  const fontSize = parseFloat(document.getElementById('font-size-slider').value);
  document.getElementById('font-size-value').textContent = fontSize.toFixed(1) + 'rem';
  const table = document.getElementById('sched-grid-table');
  // Hapus semua kelas font
  table.classList.remove('font-small', 'font-medium', 'font-large');
  if (fontSize <= 0.9) table.classList.add('font-small');
  else if (fontSize >= 1.2) table.classList.add('font-large');
  else table.classList.add('font-medium'); // 1.0 default

  // Build table
  let html = '<thead><tr>';
  html += `<th style="width:90px">Hari</th>`;
  for (let i = 1; i <= jamPerHari; i++) html += `<th>${i}</th>`;
  html += '</tr></thead>';

  html += '<tbody>';

  displayHari.forEach(dayData => {
    // Parse into merged cells
    const cells = [];
    let j = 0;
    const dk = dayData.kodes;
    while (j < dk.length) {
      const kode = dk[j];
      let span = 1;
      while (j + span < dk.length && dk[j+span] === kode) span++;
      const info = kodeGuru[kode] || { mapel: kode, nama: '' };
      cells.push({ kode, mapel: info.mapel, nama: info.nama, span, jamStart: j+1 });
      j += span;
    }

    // Apply search highlight / filter
    const rowVisible = !q || cells.some(c =>
      c.mapel.toLowerCase().includes(q) || c.nama.toLowerCase().includes(q) || c.kode.toLowerCase().includes(q)
    );
    if (!rowVisible) return;

    html += `<tr>`;
    html += `<td class="col-hari">${dayData.hari}</td>`;

    // Fill up to jamPerHari columns
    let col = 1;
    cells.forEach(cell => {
      // Gap before this cell
      while (col < cell.jamStart) {
        html += `<td class="cell-mapel cell-empty"></td>`;
        col++;
      }
      const highlight = q && (cell.mapel.toLowerCase().includes(q)||cell.nama.toLowerCase().includes(q)||cell.kode.toLowerCase().includes(q));
      const specialClass = getSpecialClass(cell.kode);
      const highlightStyle = highlight ? 'background:#fef9c3;' : '';
      html += `<td class="cell-mapel ${specialClass}" colspan="${cell.span}" style="${highlightStyle}">
        <span class="mapel">${cell.mapel}</span>
        ${cell.nama ? `<span class="guru">${cell.nama}</span>` : ''}
      </td>`;
      col += cell.span;
    });
    // Remaining empty cells
    while (col <= jamPerHari) {
      html += `<td class="cell-mapel cell-empty"></td>`;
      col++;
    }
    html += `</tr>`;

    // Time sub-row if toggle on
    if (_showTimeRow) {
      html += `<tr class="time-row"><td></td>`;
      for (let i=0;i<jamPerHari;i++) html += `<td>${jamTimes[i]||''}</td>`;
      html += `</tr>`;
    }
  });

  html += '</tbody>';
  document.getElementById('sched-grid-table').innerHTML = html;
}

function getSpecialClass(kode) {
  const k = kode.toLowerCase();
  if (k === 'gls') return 'cell-gls';
  if (k === 'upcr' || k === 'upacara') return 'cell-upcr';
  if (k === 'bk' || k === 'nrm') return 'cell-bk';
  if (k === 'krida' || k === 'khd' || k === 'kbn') return 'cell-krida';
  return '';
}

// Event listener untuk slider font
document.getElementById('font-size-slider').addEventListener('input', function() {
  renderGrid();
});

// === FUNGSI CAPTURE DENGAN CLONE (SOLUSI FULL LEBAR) ===
function captureElementFull(element) {
  return new Promise((resolve, reject) => {
    // Clone elemen
    const clone = element.cloneNode(true);
    // Buat container sementara di luar layar
    const container = document.createElement('div');
    container.style.position = 'absolute';
    container.style.left = '-9999px';
    container.style.top = '0';
    container.style.width = 'max-content';  // selebar konten
    container.style.height = 'auto';
    container.style.zIndex = '-1000';
    container.appendChild(clone);
    document.body.appendChild(container);

    // Paksa tema terang untuk hasil yang konsisten
    container.setAttribute('data-theme', 'light');

    html2canvas(clone, {
      scale: 3, // skala tinggi agar teks tajam
      backgroundColor: '#ffffff',
      logging: false,
      allowTaint: false,
      useCORS: true
    }).then(canvas => {
      document.body.removeChild(container);
      resolve(canvas);
    }).catch(err => {
      document.body.removeChild(container);
      reject(err);
    });
  });
}

// ‚îÄ‚îÄ Download JPG dengan rasio 4:3 ‚îÄ‚îÄ
function downloadJPG() {
  if (scheduleData.length === 0) {
    showToast('‚ùå Buat jadwal terlebih dahulu');
    return;
  }
  showToast('üñºÔ∏è Menyiapkan gambar...');
  const element = document.getElementById('jadwal-print-area');
  
  captureElementFull(element).then(canvas => {
    const origW = canvas.width;
    const origH = canvas.height;
    const targetRatio = 4 / 3;

    // Tentukan ukuran canvas target agar dapat menampung seluruh gambar asli dan memiliki rasio 4:3
    let targetW, targetH;
    let w1 = Math.max(origW, origH * targetRatio);
    let h1 = w1 / targetRatio;
    let h2 = Math.max(origH, origW / targetRatio);
    let w2 = h2 * targetRatio;
    if (w1 * h1 >= w2 * h2) {
      targetW = Math.round(w1);
      targetH = Math.round(h1);
    } else {
      targetW = Math.round(w2);
      targetH = Math.round(h2);
    }

    const finalCanvas = document.createElement('canvas');
    finalCanvas.width = targetW;
    finalCanvas.height = targetH;
    const ctx = finalCanvas.getContext('2d');
    ctx.fillStyle = '#ffffff';
    ctx.fillRect(0, 0, targetW, targetH);

    // Hitung posisi agar gambar di tengah
    const dx = Math.round((targetW - origW) / 2);
    const dy = Math.round((targetH - origH) / 2);
    ctx.drawImage(canvas, dx, dy);

    finalCanvas.toBlob(blob => {
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `Jadwal-${document.getElementById('nama-kelas').value || 'Kelas'}.jpg`;
      a.click();
      URL.revokeObjectURL(url);
      showToast('‚úÖ JPG berhasil diunduh!');
    }, 'image/jpeg', 0.95);
  }).catch(err => {
    console.error(err);
    showToast('‚ùå Gagal membuat gambar');
  });
}

// ‚îÄ‚îÄ Download PDF dengan rasio 4:3 ‚îÄ‚îÄ
function downloadPDF() {
  if (scheduleData.length === 0) {
    showToast('‚ùå Buat jadwal terlebih dahulu');
    return;
  }
  showToast('üìÑ Menyiapkan PDF...');
  const element = document.getElementById('jadwal-print-area');
  
  captureElementFull(element).then(canvas => {
    const { jsPDF } = window.jspdf;
    const pdfW = 240; // mm
    const pdfH = 180; // mm
    const pdf = new jsPDF({
      orientation: 'landscape',
      unit: 'mm',
      format: [pdfW, pdfH]
    });

    const imgData = canvas.toDataURL('image/jpeg', 0.95);
    const margin = 5; // mm
    const maxW = pdfW - margin * 2;
    const maxH = pdfH - margin * 2;

    const origW = canvas.width;
    const origH = canvas.height;

    // Hitung skala agar gambar muat dalam area dengan margin
    const scale = Math.min(maxW / origW, maxH / origH);
    const w = origW * scale;
    const h = origH * scale;
    const x = (pdfW - w) / 2;
    const y = (pdfH - h) / 2;

    pdf.addImage(imgData, 'JPEG', x, y, w, h);
    pdf.save(`Jadwal-${document.getElementById('nama-kelas').value || 'Kelas'}.pdf`);
    showToast('‚úÖ PDF berhasil diunduh!');
  }).catch(err => {
    console.error(err);
    showToast('‚ùå Gagal membuat PDF');
  });
}

function downloadCSV() {
  if (scheduleData.length === 0) {
    showToast('‚ùå Buat jadwal terlebih dahulu');
    return;
  }
  const kelas = document.getElementById('nama-kelas').value||'Kelas';
  let csv = `Jadwal Kelas ${kelas}\n`;
  csv += 'Hari,Jam ke-,Kode,Mata Pelajaran,Guru\n';
  scheduleData.forEach(d => {
    let j=0; const dk=d.kodes;
    while(j<dk.length){
      const kode=dk[j]; let span=1;
      while(j+span<dk.length&&dk[j+span]===kode)span++;
      const info=kodeGuru[kode]||{mapel:kode,nama:''};
      const jam=span>1?`${j+1}-${j+span}`:`${j+1}`;
      csv+=`"${d.hari}","${jam}","${kode}","${info.mapel}","${info.nama}"\n`;
      j+=span;
    }
  });
  const blob=new Blob([csv],{type:'text/csv;charset=utf-8;'});
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob);
  a.download=`Jadwal-${kelas}.csv`; a.click();
  showToast('üìä CSV berhasil diunduh!');
}

function showInputSection() {
  document.getElementById('output-section').style.display='none';
  document.getElementById('step1-card').scrollIntoView({behavior:'smooth'});
}

function clearForm() {
  document.getElementById('kodes').value='';
  document.getElementById('counter-row').style.display='none';
}

function loadContoh() {
  // Mengisi data sesuai dengan foto yang dikirim
  document.getElementById('nama-kelas').value = 'VII E';
  document.getElementById('nama-sekolah').value = 'SMP Negeri 1 Semarang';
  document.getElementById('semester').value = 'Semester 1 Tahun Pelajaran 2022/2023';
  document.getElementById('tgl-mulai').value = 'Mulai 18 Juli 2022';
  document.getElementById('jam-per-hari').value = 10;
  buildJamConfig();
  
  // Pastikan checkbox dicentang (jam kosong)
  document.getElementById('clear-jam-checkbox').checked = true;
  clearAllJamFields(true);

  // Kode-kode yang disusun menyerupai foto (berdasarkan interpretasi)
  // Senin: Upcr, DTK DTK, END END, YTS YTS, G1 G1 G1 (sisa 3 jam)
  // Selasa: GLS GLS, NRM, DRS DRS, SGS SGS SGS, IF1 IF1
  // Rabu: GLS GLS, SRW SRW SRW, IDS IDS IDS, A1 A1
  // Kamis: DTK DTK DTK, END END, YTS YTS, ID2 ID2, SSC (1 jam)
  // Jumat: KBN KBN KBN, W1 W1 W1, R1 R1
  const contohKode = 
    'Upcr DTK DTK END END YTS YTS G1 G1 G1 ' +                 // Senin (10)
    'GLS GLS NRM DRS DRS SGS SGS SGS IF1 IF1 ' +               // Selasa (10)
    'GLS GLS SRW SRW SRW IDS IDS IDS A1 A1 ' +                 // Rabu (10)
    'DTK DTK DTK END END YTS YTS ID2 ID2 SSC ' +               // Kamis (10)
    'KBN KBN KBN W1 W1 W1 R1 R1';                              // Jumat (9)

  document.getElementById('kodes').value = contohKode;
  document.getElementById('kodes').dispatchEvent(new Event('input'));
  showToast('üìã Contoh data mirip foto dimuat!');
}

// ‚îÄ‚îÄ Fitur Simpan ke localStorage ‚îÄ‚îÄ
function simpanJadwal() {
  const data = {
    sekolah: document.getElementById('nama-sekolah').value,
    kelas: document.getElementById('nama-kelas').value,
    semester: document.getElementById('semester').value,
    tgl: document.getElementById('tgl-mulai').value,
    jamPerHari: document.getElementById('jam-per-hari').value,
    jamTimes: [],
    kodes: document.getElementById('kodes').value
  };
  for (let i = 1; i <= data.jamPerHari; i++) {
    const el = document.getElementById(`jt-${i}`);
    if (el) data.jamTimes.push(el.value);
  }
  localStorage.setItem('jadwalData', JSON.stringify(data));
  showToast('‚úÖ Jadwal tersimpan!');
}

function muatJadwal() {
  const saved = localStorage.getItem('jadwalData');
  if (!saved) { showToast('‚ùå Tidak ada data tersimpan'); return; }
  try {
    const data = JSON.parse(saved);
    document.getElementById('nama-sekolah').value = data.sekolah || '';
    document.getElementById('nama-kelas').value = data.kelas || '';
    document.getElementById('semester').value = data.semester || '';
    document.getElementById('tgl-mulai').value = data.tgl || '';
    document.getElementById('jam-per-hari').value = data.jamPerHari || 10;
    buildJamConfig();
    if (data.jamTimes && Array.isArray(data.jamTimes)) {
      for (let i = 0; i < data.jamTimes.length; i++) {
        const el = document.getElementById(`jt-${i+1}`);
        if (el) el.value = data.jamTimes[i];
      }
    }
    document.getElementById('kodes').value = data.kodes || '';
    document.getElementById('kodes').dispatchEvent(new Event('input'));
    generateJadwal();
    showToast('‚úÖ Jadwal dimuat!');
  } catch (e) {
    showToast('‚ùå Gagal memuat data');
  }
}

// ‚îÄ‚îÄ Toast ‚îÄ‚îÄ
let toastTimer;
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove('show'), 2800);
}
</script>
<footer style="text-align:center; margin: 20px 0; font-size:0.75rem; color:var(--text2);">
  dibuat oleh <a href="https://www.instagram.com/a.farhanhan/" target="_blank">Ammar Farhan</a> | <a href="https://github.com/farhanboutak/jadwal" target="_blank">GitHub</a>
</footer>
<!-- Modal Popup Marhaban ya Ramadhan -->
<div id="ramadhan-modal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal()">&times;</span>
    <div class="modal-body">
      <span class="modal-icon">üåô</span>
      <h2>Marhaban ya Ramadhan</h2>
      <p>Selamat menunaikan ibadah puasa. Semoga bulan suci ini membawa berkah.</p>
      <button class="btn btn-primary" onclick="closeModal()">Tutup</button>
    </div>
  </div>
</div>

<style>
/* Modal styling */
.modal {
  display: none; /* Hidden by default */
  position: fixed;
  z-index: 10000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.6);
  backdrop-filter: blur(4px);
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.3s;
}

.modal-content {
  background: var(--surface);
  border-radius: var(--radius);
  max-width: 400px;
  width: 90%;
  box-shadow: var(--shadow);
  border: 1px solid var(--border);
  overflow: hidden;
  animation: slideUp 0.3s;
}

.modal-body {
  padding: 32px 24px;
  text-align: center;
}

.modal-icon {
  font-size: 3rem;
  display: block;
  margin-bottom: 16px;
}

.modal h2 {
  font-size: 1.6rem;
  font-weight: 700;
  color: var(--accent);
  margin-bottom: 12px;
}

.modal p {
  color: var(--text2);
  margin-bottom: 24px;
  line-height: 1.5;
}

.close-btn {
  float: right;
  font-size: 28px;
  font-weight: bold;
  color: var(--text2);
  cursor: pointer;
  padding: 8px 16px;
  line-height: 1;
  transition: color 0.2s;
}

.close-btn:hover {
  color: var(--accent);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(30px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

</style>

<script>
function showModal() {
  document.getElementById('ramadhan-modal').style.display = 'flex';
}

function closeModal() {
  document.getElementById('ramadhan-modal').style.display = 'none';
}

window.addEventListener('load', function() {
  setTimeout(showModal, 1000);
});
</script>
</body>
</html>